(function(){var m,e,a,b,k,l,d,g,i,f,n,c,j,h;m=false;k=function(o){if(m===true){return console.log(o)}};c=function(o,p){return o+p*9};j=function(o){return o%9};h=function(o){return Math.floor(o/9)};g=function(p){var o;o=j(p);return Math.floor(o/3)*3};f=function(o){var p;p=h(o);return Math.floor(p/3)*3};i=function(o){return Math.floor(o/3)*3};n=function(o){return Math.floor(o/3)*3};e=[0,1,2,9,10,11,18,19,20];d=function(o,p){return o+e[p]};l=null;if(typeof Array.prototype.indexOf==="undefined"){l=function(o,p){var q,r,s;for(q=r=0,s=o.length-1;0<=s?r<=s:r>=s;q=0<=s?++r:--r){if(o[q]===p){return q}}return -1}}else{l=function(o,p){return o.indexOf(p)}}b=function(F,r,p,D){var z,H,G,w,o,u,E,C,A,t,s,B;C=j(F);A=h(F);H=i(C);G=n(A);z=c(H,G);for(u=t=0;t<=8;u=++t){o=[c(u,A),c(C,u),d(z,u)];for(s=0,B=o.length;s<B;s++){w=o[s];if(w===F){continue}E=p[w];if(E===0){E=D[w]}if(E===r){return false}}}return true};a=(function(){function o(){}o.empty=0;o.beautify=function(u){var p,r,t;if(u.length===0){return""}r="";for(p=t=0;t<=80;p=++t){if(u[p]===0){r+="_"}else{r+=""+u[p]}if((j(p))===8){r+="\n"}else{r+=","}}return r};o.prettify=function(p){return this.beautify(p)};o.solve=function(w){var s,t,r,p,u,v;v=this.solve_reduce(w),r=v[0],t=v[1];p=true;for(s=u=0;u<=80;s=++u){if(r[s]===0){p=false;break}}if(p){return r}else{return this.solve_backtrack(r,t)}};o.solve_reduce=function(G){var H,A,w,L,F,D,K,I,J,u,z,E,C,B,t,s,r,M,p,N;A=false;u=[];H=G.slice(0);for(K=t=0;t<=80;K=++t){if(G[K]===0){u.push([1,2,3,4,5,6,7,8,9])}else{u.push([])}}while(true){A=false;for(w=s=0;s<=80;w=++s){if(u[w].length===0){continue}C=j(w);B=h(w);F=i(C);D=n(B);L=c(F,D);for(J=r=0;r<=8;J=++r){I=[c(J,B),c(C,J),d(L,J)];for(p=0,M=I.length;p<M;p++){K=I[p];if(K===w){continue}E=H[K];if(E===0){if(u[K].length===1){E=u[K][0]}else{continue}}z=l(u[w],E);if(z>-1){u[w].splice(z,1);A=true}}}}for(K=N=0;N<=80;K=++N){if(u[K].length===1){H[K]=u[K][0];u[K]=[]}}if(A===false){break}else{A=false}}return[H,u]};o.solve_backtrack=function(p,B){var C,y,D,w,x,A,t,z,r,v,u,s;C=[];D=0;r=1;y=0;A=0;t=[];x=[];for(w=v=0;v<=80;w=++v){C.push(0);x.push(0)}for(w=u=0;u<=80;w=++u){if(p[w]===0){t.push(w)}}D=t[0];if(typeof D==="undefined"){return p}r=B[D][0];x[D]=0;while(true){y++;if(r>9){C[D]=0;x[D]=0;A--;D=t[A];if(typeof D==="undefined"){D=-1}if(D<0){k("failed");return[]}else{x[D]=x[D]+1;r=B[D][x[D]];if(typeof r==="undefined"){r=10}C[D]=0;k("---> backtrack to ("+(j(D))+","+(h(D))+")");continue}}else{if(D>80){z=[];for(w=s=0;s<=81;w=++s){if(p[w]===0){z[w]=C[w]}else{z[w]=p[w]}}console.log("count: "+y);return z}else{if(b(D,r,p,C)){k("[PUT] "+r+" on ("+(j(D))+","+(h(D))+")");C[D]=r;A++;D=t[A];if(typeof D==="undefined"){D=81}if(D===81){continue}x[D]=0;r=B[D][0];k("---> move to ("+(j(D))+","+(h(D))+")");continue}else{x[D]=x[D]+1;r=B[D][x[D]];if(typeof r==="undefined"){r=10}continue}}}}};return o})();this.Sudoku=a}).call(this);